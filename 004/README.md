## 学生试卷存储系统
#### 考试预估

假设每门学科每年 2 次考试，每个学生平均一学期 10 门课，考试采取机考的方式，每门考试的答案 20 判断题、20 选择题、4 道大题(答案 200 字以内)，考试结果永久保存，在校学生能够看到自己曾经的考试结果， 则考试结果记录的存储量为:

在校学生1000 万* 10(课)* 2(考试次数) * 1000(答案)* 2(学期) * 4 = 160000000 条数据，约为 4T 离校学生:每年 250 万，存储量为 1T

假设学校的考试都安排在某一个月内，考试的时候请求试卷，提交答案，中间答题过程浏览器本地完成，由于考试集中在上午 4 小时和下午 4 小时，且请求试卷集中在考试开始的前 1 分钟，提交答案集中在考试结束前的 30 分钟，因此估算如下:

请求试卷:1000 万* 10(课) / 20(周末不考试) / 4(每天 4 堂考试) / 1 分钟= 150 万请求/分钟 ≈3.5 万/每秒

提交试卷: 1000 万* 20(课) / 20(周末不考试) / 4(每天 4 堂考试)/ 30 分钟= 1700/每秒

## 存储方案设计

### 试卷存储方案设计

数据结构采用 String

Key：学校 ID +试卷 ID  

Value：试卷内容
 

### 答卷

数据结构采用 string

Key：学校 ID +试卷 ID+ 学生 ID

Value：答卷内容


### 成绩
数据结构采用ZSet

Key: 课程ID
Value: 学生ID
Score: 分数

 

3.读写流程

（1）老师提交试卷，试卷内容保存到 Redis

（2）学生登录考试系统获取试卷内容并开始进行答题

（3）答题交卷

4.服务器数量和性能

  Redis 单机性能越在 10 万 QPS 左右，考虑高可用至少采用 3 台服务器（数据节点和哨兵节点混合部署）