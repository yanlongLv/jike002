## 要求

基于模块 5 第 6 课的微博实战案例，分析“微博评论”这个核心场景的业务特性，然后设计其高性能高可用

计算架构，包括但不限于如下内容：

1. 计算性能预估（不需要考虑存储性能）；

2. 非热点事件时的高性能计算架构，需要考虑是否要拆分独立的服务；

3. 热点事件时的高可用计算架构；

## 计算性能估算

1. 2020.9月月活5.11亿,日活2.24亿;

2. 假设平均一条微博的观看人数有 100 次，基于此我们假设看 5 条微博后会看一次评论，那评论次数为： 2.5 亿 * 100 / 5 = 50 亿;

3. 大部分人看微博评论和看微博的时间也基本重合，因此看微博评论的平均 QPS 计算如下： 50 亿 * 60% / (4*3600) = 200K/s；

## 微博评论

1. 给予前面的假设，微博每日的评论的数量 50亿 / 5 = 10亿；
2. 给予看微博和评论的时间限制则每秒写入的量为：10亿 * 60% / (4 * 3600) = 40k/s;

## 计算架构设计

微博的评论属于微博的一部分，但是可以作为一个独立的服务，作为一个单独的服务，不影响微博的主题内容；

## 多级负载均衡架构

![image](https://github.com/yanlongLv/jike002/blob/master/005/005-1.png)